{"version":3,"sources":["../../../src/panels/incident-list/editor.js"],"names":["bosunIncidentListPanelEditor","restrict","scope","templateUrl","controller","BosunIncidentListPanelEditorCtrl","$scope","$rootScope","$q","uiSegmentSrv","datasourceSrv","templateSrv","editor","panelCtrl","ctrl","panel","self","datasources","_","filter","getMetricSources","datasource","meta","id","map","get","then","refresh","showMutli"],"mappings":";;;;;;;;;;;;;AA4BO,aAASA,4BAAT,GAAwC;AAC3C,eAAO;AACHC,sBAAU,GADP;AAEHC,mBAAO,IAFJ;AAGHC,yBAAa,2DAHV;AAIHC,wBAAYC;AAJT,SAAP;AAMH;;4CAPeL,4B;;;;;;;;;;;;;;;;;;;;;;;AA5BVK,4C;AACF,0DAAYC,MAAZ,EAAoBC,UAApB,EAAgCC,EAAhC,EAAoCC,YAApC,EAAkDC,aAAlD,EAAiEC,WAAjE,EAA8E;AAAA;;AAC1EL,2BAAOM,MAAP,GAAgB,IAAhB;AACA,yBAAKC,SAAL,GAAiBP,OAAOQ,IAAxB;AACA,yBAAKC,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACA,yBAAKP,EAAL,GAAUA,EAAV;AACA,wBAAIQ,OAAO,IAAX;AACA,yBAAKN,aAAL,GAAqBA,aAArB;AACA,wBAAIO,cAAcC,EAAEC,MAAF,CAAS,KAAKT,aAAL,CAAmBU,gBAAnB,EAAT,EAAgD,sBAAc;AAC5E,+BAAOC,WAAWC,IAAX,CAAgBC,EAAhB,KAAuB,kBAA9B;AACH,qBAFiB,CAAlB;AAGA,yBAAKN,WAAL,GAAmBC,EAAEM,GAAF,CAAMP,WAAN,EAAmB,MAAnB,CAAnB;AACA,wBAAI,CAAC,KAAKF,KAAL,CAAWM,UAAhB,EAA4B;AACxB,6BAAKN,KAAL,CAAWM,UAAX,GAAwB,KAAKJ,WAAL,CAAiB,CAAjB,CAAxB;AACH;AACD,yBAAKP,aAAL,CAAmBe,GAAnB,CAAuB,KAAKV,KAAL,CAAWM,UAAlC,EAA8CK,IAA9C,CAAmD,UAAUL,UAAV,EAAsB;AACrEL,6BAAKK,UAAL,GAAkBA,UAAlB;AACAL,6BAAKH,SAAL,CAAec,OAAf;AACH,qBAHD;AAIA,yBAAKhB,WAAL,GAAmBA,WAAnB;AACA,yBAAKI,KAAL,CAAWa,SAAX,GAAuB,KAAKb,KAAL,CAAWa,SAAlC;AACH;;;;wDAEmB;AAChB,6BAAKf,SAAL,CAAec,OAAf;AACH","file":"editor.js","sourcesContent":["class BosunIncidentListPanelEditorCtrl {\n    constructor($scope, $rootScope, $q, uiSegmentSrv, datasourceSrv, templateSrv) {\n        $scope.editor = this;\n        this.panelCtrl = $scope.ctrl;\n        this.panel = this.panelCtrl.panel;\n        this.$q = $q;\n        var self = this;\n        this.datasourceSrv = datasourceSrv;\n        var datasources = _.filter(this.datasourceSrv.getMetricSources(), datasource => {\n            return datasource.meta.id === 'bosun-datasource';\n        });\n        this.datasources = _.map(datasources, 'name');\n        if (!this.panel.datasource) {\n            this.panel.datasource = this.datasources[0];\n        }\n        this.datasourceSrv.get(this.panel.datasource).then(function (datasource) {\n            self.datasource = datasource;\n            self.panelCtrl.refresh();\n        });\n        this.templateSrv = templateSrv;\n        this.panel.showMutli = this.panel.showMutli;\n    }\n\n    datasourceChanged() {\n        this.panelCtrl.refresh();\n    }\n}\n\nexport function bosunIncidentListPanelEditor() {\n    return {\n        restrict: 'E',\n        scope: true,\n        templateUrl: 'public/plugins/bosun-app/panels/incident-list/editor.html',\n        controller: BosunIncidentListPanelEditorCtrl,\n    };\n}"]}